/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { CriblControlPlane } from "../index.js";
import { createTestHTTPClient } from "./testclient.js";

test("Sources List Input", async () => {
  const testHttpClient = createTestHTTPClient("listInput");

  const criblControlPlane = new CriblControlPlane({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: process.env["CRIBLCONTROLPLANE_BEARER_AUTH"] ?? "value",
    },
  });

  const result = await criblControlPlane.sources.listSource();
  expect(result).toBeDefined();
  expect(result).toEqual({});
});

test("Sources Create Input", async () => {
  const testHttpClient = createTestHTTPClient("createInput");

  const criblControlPlane = new CriblControlPlane({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: process.env["CRIBLCONTROLPLANE_BEARER_AUTH"] ?? "value",
    },
  });

  const result = await criblControlPlane.sources.createSource({
    type: "tcp",
    disabled: false,
    sendToRoutes: true,
    pqEnabled: false,
    host: "0.0.0.0",
    port: 301.76,
    ipWhitelistRegex: "/.*/",
    maxActiveCxn: 1000,
    socketIdleTimeout: 0,
    socketEndingMaxWait: 30,
    socketMaxLifespan: 0,
    enableProxyHeader: false,
    staleChannelFlushMs: 10000,
    enableHeader: false,
    authType: "manual",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({});
});

test("Sources Get Input By Id", async () => {
  const testHttpClient = createTestHTTPClient("getInputById");

  const criblControlPlane = new CriblControlPlane({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: process.env["CRIBLCONTROLPLANE_BEARER_AUTH"] ?? "value",
    },
  });

  const result = await criblControlPlane.sources.getSourceById({
    id: "<id>",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({});
});

test("Sources Update Input By Id", async () => {
  const testHttpClient = createTestHTTPClient("updateInputById");

  const criblControlPlane = new CriblControlPlane({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: process.env["CRIBLCONTROLPLANE_BEARER_AUTH"] ?? "value",
    },
  });

  const result = await criblControlPlane.sources.updateSourceById({
    id: "<id>",
    input: {
      id: "<id>",
      type: "kube_events",
      disabled: false,
      sendToRoutes: true,
      pqEnabled: false,
    },
  });
  expect(result).toBeDefined();
  expect(result).toEqual({});
});

test("Sources Delete Input By Id", async () => {
  const testHttpClient = createTestHTTPClient("deleteInputById");

  const criblControlPlane = new CriblControlPlane({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: process.env["CRIBLCONTROLPLANE_BEARER_AUTH"] ?? "value",
    },
  });

  const result = await criblControlPlane.sources.deleteSourceById({
    id: "<id>",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({});
});

test("Sources Create Input Hec Token By Id", async () => {
  const testHttpClient = createTestHTTPClient("createInputHecTokenById");

  const criblControlPlane = new CriblControlPlane({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: process.env["CRIBLCONTROLPLANE_BEARER_AUTH"] ?? "value",
    },
  });

  const result = await criblControlPlane.sources.createSourceHecTokenById({
    id: "<id>",
    addHecTokenRequest: {
      token: "<value>",
    },
  });
  expect(result).toBeDefined();
  expect(result).toEqual({});
});

test("Sources Update Input Hec Token By Id And Token", async () => {
  const testHttpClient = createTestHTTPClient(
    "updateInputHecTokenByIdAndToken",
  );

  const criblControlPlane = new CriblControlPlane({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: process.env["CRIBLCONTROLPLANE_BEARER_AUTH"] ?? "value",
    },
  });

  const result = await criblControlPlane.sources
    .updateSourceHecTokenByIdAndToken({
      id: "<id>",
      token: "<value>",
      updateHecTokenRequest: {},
    });
  expect(result).toBeDefined();
  expect(result).toEqual({});
});
